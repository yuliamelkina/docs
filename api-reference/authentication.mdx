---
title: 'Authentication'
description: 'Learn how to authenticate with the Omniwire API'
---

## Overview

The Omniwire API uses a multi-header authentication system to ensure secure access to your tenant's resources. All API requests must include the required headers for proper authentication and request tracking.

## Required Headers

The Omniwire API requires three main headers for authentication and request management:

<CardGroup cols={3}>
  <Card title="Api-Key" icon="key">
    Your tenant's unique API key for authentication
  </Card>
  <Card title="Tenant-Id" icon="building">
    Your tenant UUID for resource isolation
  </Card>
  <Card title="Idempotency-Key" icon="shield">
    UUID for preventing duplicate operations
  </Card>
</CardGroup>

### Header Details

<ParamField path="Api-Key" type="string" required>
  Your tenant API key for authentication
  - **Development**: Defaults to `"test-api-key"` 
  - **Production**: Your unique tenant API key
</ParamField>

<ParamField path="Tenant-Id" type="string" required>
  Your tenant UUID for resource isolation
  - **Development**: Auto-set to test tenant UUID if not provided
  - **Production**: Your unique tenant UUID
</ParamField>

<ParamField path="Idempotency-Key" type="string">
  UUID for request idempotency on write operations
  - **Development**: Auto-generated if not provided
  - **Production**: Recommended to provide for all write operations
</ParamField>

## Environment Setup

<Warning>
**Sandbox Rate Limits & Restrictions**

Sandbox environment has **arbitrary rate limits** and requests may be dropped at any time. Additionally:
- **Use for API schema testing only** - not for functional testing
- No webhooks are fired in Sandbox
- All financial operations use dummy data
- No real blockchain or banking connections

**Recommendation**: Use Sandbox for API integration testing, then switch to Production for all functional testing.
</Warning>

### Development Environment (Sandbox)

For development and testing:

- **Base URL**: `http://localhost:3000`
- **Api-Key**: `"test-api-key"` (automatically set)
- **Tenant-Id**: Test tenant UUID (automatically set)
- **Purpose**: Local development and testing

### Production Environment  

For live transactions:

- **Base URL**: `https://api.omniwire.com`
- **Api-Key**: Your unique tenant API key
- **Tenant-Id**: Your unique tenant UUID
- **Purpose**: Live transaction processing

## Making Authenticated Requests

### Basic Request Format

Include all required headers in your requests:

```bash
curl -X GET http://localhost:3000/customers \
  -H "Api-Key: test-api-key" \
  -H "Tenant-Id: your-tenant-uuid" \
  -H "Content-Type: application/json"
```

### Write Operations with Idempotency

For operations that create or modify resources:

```bash
curl -X POST http://localhost:3000/customers \
  -H "Api-Key: test-api-key" \
  -H "Tenant-Id: your-tenant-uuid" \
  -H "Idempotency-Key: 550e8400-e29b-41d4-a716-446655440000" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "individual",
    "first_name": "John",
    "last_name": "Doe",
    "email": "john.doe@example.com"
  }'
```

### SDK Integration

<CodeGroup>

```javascript Node.js
const omniwire = require('@omniwire/node-sdk');

const client = new omniwire.Client({
  apiKey: 'test-api-key',
  tenantId: 'your-tenant-uuid',
  baseURL: 'http://localhost:3000'
});

// All requests include authentication headers automatically
const customers = await client.customers.list();
```

```python Python
import omniwire

omniwire.api_key = 'test-api-key'
omniwire.tenant_id = 'your-tenant-uuid'
omniwire.base_url = 'http://localhost:3000'

# All requests include authentication headers automatically
customers = omniwire.Customer.list()
```

```php PHP
require_once 'vendor/autoload.php';

\Omniwire\Omniwire::setApiKey('test-api-key');
\Omniwire\Omniwire::setTenantId('your-tenant-uuid');
\Omniwire\Omniwire::setBaseUrl('http://localhost:3000');

// All requests include authentication headers automatically
$customers = \Omniwire\Customer::all();
```

</CodeGroup>

## Testing Authentication

### Quick Test Request

Test your authentication setup with a simple customer list request:

<CodeGroup>

```bash cURL
curl -X GET http://localhost:3000/customers \
  -H "Api-Key: test-api-key" \
  -H "Tenant-Id: your-tenant-uuid" \
  -H "Content-Type: application/json"
```

```javascript Node.js
const client = new omniwire.Client({
  apiKey: 'test-api-key',
  tenantId: 'your-tenant-uuid'
});

try {
  const customers = await client.customers.list();
  console.log('Authentication successful, found', customers.length, 'customers');
} catch (error) {
  console.error('Authentication failed:', error.message);
}
```

```python Python
import omniwire

omniwire.api_key = 'test-api-key'
omniwire.tenant_id = 'your-tenant-uuid'

try:
    customers = omniwire.Customer.list()
    print(f"Authentication successful, found {len(customers)} customers")
except omniwire.error.AuthenticationError as e:
    print(f"Authentication failed: {e}")
```

</CodeGroup>

## Idempotency

### How Idempotency Works

Idempotency ensures that retrying a request produces the same result, preventing accidental duplicate operations:

```bash
# First request - creates a new customer
curl -X POST http://localhost:3000/customers \
  -H "Api-Key: test-api-key" \
  -H "Tenant-Id: your-tenant-uuid" \
  -H "Idempotency-Key: 550e8400-e29b-41d4-a716-446655440000" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "individual",
    "first_name": "John",
    "last_name": "Doe",
    "email": "john.doe@example.com"
  }'

# Retry with same key - returns the same customer
curl -X POST http://localhost:3000/customers \
  -H "Api-Key: test-api-key" \
  -H "Tenant-Id: your-tenant-uuid" \
  -H "Idempotency-Key: 550e8400-e29b-41d4-a716-446655440000" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "individual",
    "first_name": "John",
    "last_name": "Doe",
    "email": "john.doe@example.com"
  }'
```

### Best Practices for Idempotency Keys

<Accordion title="Key Generation">
- Use UUIDs for guaranteed uniqueness
- Include operation context in key generation
- Store keys locally for retry scenarios
- Use different keys for different operations
</Accordion>

<Accordion title="Key Management">
```javascript
const { v4: uuidv4 } = require('uuid');

// Generate unique key per operation
const idempotencyKey = uuidv4();

// Store for potential retries
const operationKey = `customer-creation-${Date.now()}-${uuidv4()}`;
```
</Accordion>

## Error Handling

### Common Authentication Errors

<Accordion title="Missing Api-Key">
```json
{
  "statusCode": 401,
  "message": "Api-Key header is required",
  "error": "Unauthorized"
}
```
</Accordion>

<Accordion title="Invalid Api-Key">
```json
{
  "statusCode": 403,
  "message": "Invalid API key provided",
  "error": "Forbidden"
}
```
</Accordion>

<Accordion title="Missing Tenant-Id">
```json
{
  "statusCode": 400,
  "message": "Tenant-Id header is required",
  "error": "Bad Request"
}
```
</Accordion>

<Accordion title="Idempotency Conflict">
```json
{
  "statusCode": 409,
  "message": "Idempotency key conflict - request already processed",
  "error": "Conflict"
}
```
</Accordion>

### Error Handling in Code

<CodeGroup>

```javascript Node.js
try {
  const customer = await client.customers.create({
    type: 'individual',
    first_name: 'John',
    last_name: 'Doe',
    email: 'john.doe@example.com'
  });
} catch (error) {
  if (error.status === 401) {
    console.error('Authentication failed - check Api-Key');
  } else if (error.status === 400) {
    console.error('Bad request - check required headers');
  } else if (error.status === 409) {
    console.error('Idempotency conflict - request already processed');
  }
}
```

```python Python
try:
    customer = omniwire.Customer.create({
        'type': 'individual',
        'first_name': 'John',
        'last_name': 'Doe',
        'email': 'john.doe@example.com'
    })
except omniwire.error.AuthenticationError as e:
    print("Authentication failed - check Api-Key")
except omniwire.error.InvalidRequestError as e:
    print("Bad request - check required headers")
except omniwire.error.IdempotencyError as e:
    print("Idempotency conflict - request already processed")
```

</CodeGroup>

## Environment Configuration

### Development Setup

For local development, create a `.env` file:

```bash
# .env file
OMNIWIRE_API_KEY=test-api-key
OMNIWIRE_TENANT_ID=your-test-tenant-uuid
OMNIWIRE_BASE_URL=http://localhost:3000
```

### Production Configuration

For production deployment:

```bash
# Production environment variables
OMNIWIRE_API_KEY=your-production-api-key
OMNIWIRE_TENANT_ID=your-production-tenant-uuid
OMNIWIRE_BASE_URL=https://api.omniwire.com
```

### Configuration Management

<CodeGroup>

```javascript Node.js
const config = {
  development: {
    apiKey: process.env.OMNIWIRE_API_KEY || 'test-api-key',
    tenantId: process.env.OMNIWIRE_TENANT_ID,
    baseURL: process.env.OMNIWIRE_BASE_URL || 'http://localhost:3000'
  },
  production: {
    apiKey: process.env.OMNIWIRE_API_KEY,
    tenantId: process.env.OMNIWIRE_TENANT_ID,
    baseURL: process.env.OMNIWIRE_BASE_URL || 'https://api.omniwire.com'
  }
};

const env = process.env.NODE_ENV || 'development';
const omniwireConfig = config[env];
```

```python Python
import os

class OmniwireConfig:
    def __init__(self):
        self.env = os.getenv('NODE_ENV', 'development')
        
        if self.env == 'production':
            self.api_key = os.getenv('OMNIWIRE_API_KEY')
            self.tenant_id = os.getenv('OMNIWIRE_TENANT_ID')
            self.base_url = os.getenv('OMNIWIRE_BASE_URL', 'https://api.omniwire.com')
        else:
            self.api_key = os.getenv('OMNIWIRE_API_KEY', 'test-api-key')
            self.tenant_id = os.getenv('OMNIWIRE_TENANT_ID')
            self.base_url = os.getenv('OMNIWIRE_BASE_URL', 'http://localhost:3000')
```

</CodeGroup>

## Security Best Practices

### API Key Security

<Warning>
**Never expose API keys in client-side code**
- Store keys in environment variables
- Use separate keys for different environments  
- Rotate keys regularly
- Monitor key usage for anomalies
</Warning>

### Request Security

```javascript
// Generate secure idempotency keys
const crypto = require('crypto');
const idempotencyKey = crypto.randomUUID();

// Use HTTPS in production
const baseURL = process.env.NODE_ENV === 'production' 
  ? 'https://api.omniwire.com'
  : 'http://localhost:3000';

// Set appropriate timeouts
const client = new omniwire.Client({
  apiKey: process.env.OMNIWIRE_API_KEY,
  tenantId: process.env.OMNIWIRE_TENANT_ID,
  baseURL,
  timeout: 30000, // 30 second timeout
  maxRetries: 3
});
```

## Next Steps

Now that you understand authentication, explore the available endpoints:

<CardGroup cols={2}>
  <Card title="Customers API" href="/api-reference/customers/create">
    Create and manage customers
  </Card>
  <Card title="Transfers API" href="/api-reference/transfers/create">
    Process payments and transfers
  </Card>
  <Card title="Wallets API" href="/api-reference/wallets/create">
    Manage custodial wallets
  </Card>
  <Card title="Virtual Accounts" href="/api-reference/virtual-accounts/create">
    Set up virtual accounts
  </Card>
</CardGroup>
