---
title: 'Authentication'
description: 'Learn how to authenticate with the Omniwire API'
---

## Overview

The Omniwire API uses a multi-header authentication system to ensure secure access to your tenant's resources. All API requests must include the required headers for proper authentication and request tracking.

## Required Headers

The Omniwire API requires the following headers for authentication and request management:

<CardGroup cols={3}>
  <Card title="Api-Key" icon="key">
    Your tenant's unique API key for authentication
  </Card>
  <Card title="X-Api-Key" icon="key">
    Usage key for API access control
  </Card>
  <Card title="Idempotency-Key" icon="shield">
    UUID for preventing duplicate operations
  </Card>
</CardGroup>

### Header Details

<ParamField path="Api-Key" type="string" required>
  Your tenant API key for authentication
  - **Development**: Defaults to `"test-api-key"` 
  - **Production**: Your unique tenant API key
</ParamField>

<ParamField path="X-Api-Key" type="string" required>
  Usage key for API access control
  - **Development**: Automatically handled
  - **Production**: Your unique usage key
</ParamField>

<ParamField path="Idempotency-Key" type="string">
  UUID for request idempotency on write operations
  - **Development**: Auto-generated if not provided
  - **Production**: Recommended to provide for all write operations
</ParamField>

## Environment Setup

<Warning>
**Sandbox Rate Limits & Restrictions**

Sandbox environment has **arbitrary rate limits** and requests may be dropped at any time. Additionally:
- **Use for API schema testing only** - not for functional testing
- No webhooks are fired in Sandbox
- All financial operations use dummy data
- No real blockchain or banking connections

**Recommendation**: Use Sandbox for API integration testing, then switch to Production for all functional testing.
</Warning>

### Development Environment (Sandbox)

For development and testing:

- **Base URL**: `https://staging.omniwire.com`
- **Api-Key**: `"test-api-key"` (automatically set)
- **X-Api-Key**: Automatically handled
- **Purpose**: Development and API testing

### Production Environment  

For live transactions:

- **Base URL**: `https://api.omniwire.com`
- **Api-Key**: Your unique API key
- **X-Api-Key**: Your unique usage key
- **Purpose**: Live transaction processing

## Making Authenticated Requests

### Basic Request Format

Include all required headers in your requests:

```bash
curl -X GET https://staging.omniwire.com/customers \
  -H "Api-Key: test-api-key" \
  -H "X-Api-Key: your-usage-key" \
  -H "Content-Type: application/json"
```

### Write Operations with Idempotency

For operations that create or modify resources:

```bash
curl -X POST https://staging.omniwire.com/customers \
  -H "Api-Key: test-api-key" \
  -H "X-Api-Key: your-usage-key" \
  -H "Idempotency-Key: 550e8400-e29b-41d4-a716-446655440000" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "individual",
    "first_name": "John",
    "last_name": "Doe",
    "email": "john.doe@example.com"
  }'
```

## Testing Authentication

### Quick Test Request

Test your authentication setup with a simple ping request:

```bash
curl -X GET https://staging.omniwire.com/ping \
  -H "Api-Key: test-api-key" \
  -H "X-Api-Key: your-usage-key" \
  -H "Content-Type: application/json"
```

If authentication is successful, you should receive a 200 OK response.

## Idempotency

### How Idempotency Works

Idempotency prevents duplicate operations by detecting when the same request is made multiple times. When you retry a request with the same idempotency key, the system will return an error indicating that the operation has already been processed:

```bash
# First request - creates a new customer
curl -X POST https://staging.omniwire.com/customers \
  -H "Api-Key: test-api-key" \
  -H "X-Api-Key: your-usage-key" \
  -H "Idempotency-Key: 550e8400-e29b-41d4-a716-446655440000" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "individual",
    "first_name": "John",
    "last_name": "Doe",
    "email": "john.doe@example.com"
  }'

# Retry with same key - returns an error
curl -X POST https://staging.omniwire.com/customers \
  -H "Api-Key: test-api-key" \
  -H "X-Api-Key: your-usage-key" \
  -H "Idempotency-Key: 550e8400-e29b-41d4-a716-446655440000" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "individual",
    "first_name": "John",
    "last_name": "Doe",
    "email": "john.doe@example.com"
  }'
```

### Best Practices for Idempotency Keys

<Accordion title="Key Generation">
- Use UUIDs for guaranteed uniqueness
- Include operation context in key generation
- Store keys locally for retry scenarios
- Use different keys for different operations
</Accordion>

<Accordion title="Key Management">
```javascript
const { v4: uuidv4 } = require('uuid');

// Generate unique key per operation
const idempotencyKey = uuidv4();

// Store for potential retries
const operationKey = `customer-creation-${Date.now()}-${uuidv4()}`;
```
</Accordion>

## Error Handling

### Common Authentication Errors

<Accordion title="Missing Api-Key">
```json
{
  "statusCode": 401,
  "message": "Api-Key header is required",
  "error": "Unauthorized"
}
```
</Accordion>

<Accordion title="Invalid Api-Key">
```json
{
  "statusCode": 401,
  "message": "Invalid API key provided",
  "error": "Unauthorized"
}
```
</Accordion>

<Accordion title="Missing X-Api-Key">
```json
{
  "message": "Forbidden"
}
```
</Accordion>

<Accordion title="Idempotency Conflict">
```json
{
  "statusCode": 409,
  "message": "Idempotency key conflict - request already processed",
  "error": "Conflict"
}
```
</Accordion>


## Environment Configuration

### Development Setup

For development, create a `.env` file:

```bash
# .env file
OMNIWIRE_API_KEY=test-api-key
OMNIWIRE_X_API_KEY=your-usage-key
OMNIWIRE_BASE_URL=https://staging.omniwire.com
```

### Production Configuration

For production deployment:

```bash
# Production environment variables
OMNIWIRE_API_KEY=your-production-api-key
OMNIWIRE_X_API_KEY=your-production-usage-key
OMNIWIRE_BASE_URL=https://api.omniwire.com
```

### Configuration Management

<CodeGroup>

```javascript Node.js
const config = {
  development: {
    apiKey: process.env.OMNIWIRE_API_KEY || 'test-api-key',
    xApiKey: process.env.OMNIWIRE_X_API_KEY,
    baseURL: process.env.OMNIWIRE_BASE_URL || 'https://staging.omniwire.com'
  },
  production: {
    apiKey: process.env.OMNIWIRE_API_KEY,
    xApiKey: process.env.OMNIWIRE_X_API_KEY,
    baseURL: process.env.OMNIWIRE_BASE_URL || 'https://api.omniwire.com'
  }
};

const env = process.env.NODE_ENV || 'development';
const omniwireConfig = config[env];
```

```python Python
import os

class OmniwireConfig:
    def __init__(self):
        self.env = os.getenv('NODE_ENV', 'development')
        
        if self.env == 'production':
            self.api_key = os.getenv('OMNIWIRE_API_KEY')
            self.x_api_key = os.getenv('OMNIWIRE_X_API_KEY')
            self.base_url = os.getenv('OMNIWIRE_BASE_URL', 'https://api.omniwire.com')
        else:
            self.api_key = os.getenv('OMNIWIRE_API_KEY', 'test-api-key')
            self.x_api_key = os.getenv('OMNIWIRE_X_API_KEY')
            self.base_url = os.getenv('OMNIWIRE_BASE_URL', 'https://staging.omniwire.com')
```

</CodeGroup>

## Security Best Practices

### API Key Security

<Warning>
**Never expose API keys in client-side code**
- Store keys in environment variables
- Use separate keys for different environments
- Never commit keys to version control
- Restrict API key access to authorized personnel only
</Warning>

### Request Security

```javascript
// Generate secure idempotency keys
const crypto = require('crypto');
const idempotencyKey = crypto.randomUUID();

// Use HTTPS in production
const baseURL = process.env.NODE_ENV === 'production' 
  ? 'https://api.omniwire.com'
  : 'https://staging.omniwire.com';

// Set appropriate timeouts
const requestOptions = {
  timeout: 30000, // 30 second timeout
  maxRetries: 3,
  headers: {
    'Api-Key': process.env.OMNIWIRE_API_KEY,
    'X-Api-Key': process.env.OMNIWIRE_X_API_KEY,
    'Content-Type': 'application/json'
  }
};
```

## Next Steps

Now that you understand authentication, explore the available endpoints:

<CardGroup cols={2}>
  <Card title="Customers API" href="/api-reference/customers/create">
    Create and manage customers
  </Card>
  <Card title="Transfers API" href="/api-reference/transfers/create">
    Process payments and transfers
  </Card>
  <Card title="Wallets API" href="/api-reference/wallets/create">
    Manage custodial wallets
  </Card>
  <Card title="Virtual Accounts" href="/api-reference/virtual-accounts/create">
    Set up virtual accounts
  </Card>
</CardGroup>
